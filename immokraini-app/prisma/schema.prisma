// prisma/schema.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite" // Using SQLite
  url      = env("DATABASE_URL") // Reads from .env file
}

// Agent Model
model Agent {
  id    String @id @default(cuid()) // Unique ID (string, cuid is good)
  name  String
  email String @unique // Agent email must be unique
  phone String? // Optional phone number
  imageUrl String? // Optional image URL

  properties Property[] // Relation: An agent can have many properties
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
}

// Property Model (Corrected for SQLite)
    model Property {
      id            String   @id @default(cuid())
      slug          String   @unique 
      title         String
      address       String
      price         Int      
      beds          Int?     
      baths         Int?     
      area          Int?     
      description   String?  
      propertyType  String?  
      yearBuilt     Int?     
      imageUrl      String?  
      galleryImages String?  
      videoUrl      String?  
      features      String?  

      latitude      Float?   
      longitude     Float?

      agentId       String?  
      agent         Agent?   @relation(fields: [agentId], references: [id]) 

      isFeatured    Boolean  @default(false) 

      createdAt     DateTime @default(now())
      updatedAt     DateTime @updatedAt

      @@index([agentId]) 
      @@index([isFeatured])
    }
